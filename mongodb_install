mongodb 安装且开机运行服务
下载mongodb
远端服务器下载mongodb太慢，我在windows本地下载好然后上传到服务器
secureCrt要上传需要rz命令，下载需要sz命令，如果没有需要安装lrzsz，我在ubuntu上安装
```
apt-get install lrzsz
```
然后执行rz 命令上传文件，这样比较快,我们把程序解压在/usr/local/lib/下,然后在/usr/local/bin/下建立软连接，因为全局环境变量$PATH包含该目录
```
#cd /usr/local/lib/
#rz
#tar zxvf mongodb-linux-x86_64-ubuntu1404-3.2.6
#mv mongodb-linux-x86_64-ubuntu1404-3.2.6 mongodb
#cd /usr/local/bin/
#ln -s ../lib/mongodb/bin/mongod mongod
#ln -s ../lib/mongodb/bin/mongo mongo
```
手动创建数据库存放目录
```
#cd /usr/local/lib/mongodb/
#mkdir data
#cd data
#mkdir db
```
设置开机自启动mongodb服务，
```
# cd /etc/init.d/
# vi rc.local 
#! /bin/sh
PATH=/sbin:/usr/sbin:/bin:/usr/bin

. /lib/init/vars.sh
. /lib/lsb/init-functions

mongod --dbpath=/usr/local/lib/mongodb/data/db --rest
…
```
重启服务器即可完成
```
reboot
````

配置mongodb的权限
mongodb默认是没有区分管理权限的，不用账户登录即可链接数据库，这对于我的网站是非常危险的，这里设置一个超级管理并开启权限验证。
```
#mongo
MongoDB shell version: 3.2.4
connecting to: test
> use admin
switched to db admin
> db.createUser({user:"xxx",pwd:"xxx",roles:[]})
```
然后重新编辑/etc/init.d/rc.local 让mongod服务启动时开启权限验证
```
mongod --dbpath=/usr/local/lib/mongodb/data/db --auth --rest
```
如果用的是rokomongo管理数据库需要改配置文件config.php
```
//$MONGO["servers"][$i]["mongo_db"] = "";//default mongo db to connect, works only if mongo_auth=false
$MONGO["servers"][$i]["mongo_user"] = "xxxx";//mongo authentication user name, works only if mongo_auth=false
$MONGO["servers"][$i]["mongo_pass"] = "xxxx";//mongo authentication password, works only if mongo_auth=false
$MONGO["servers"][$i]["mongo_auth"] = true;//enable mongo authentication?
$MONGO["servers"][$i]["control_users"]["xxxx"] = "xxxx";
```
